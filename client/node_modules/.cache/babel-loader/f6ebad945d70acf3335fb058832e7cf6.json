{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dumbways\\\\stage 2\\\\z-project\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { BrowserRouter as Router, Route, Routes, Link, useNavigate } from \"react-router-dom\";\nimport { useContext, useState, useEffect } from \"react\";\nimport { UserContext } from \"./contex/userContext\";\nimport Landing from './landing-page';\nimport HomePage from \"./components/home\";\nimport Subscribe from './components/subscribe-page';\nimport HomeSubscribe from \"./components/home-subscribe\";\nimport ProfilePage from \"./components/profile\";\nimport BookDetail from \"./components/bookdetail\";\nimport ReadPage from \"./components/readBook-Page\"; // Get API config & setAuthToken here ...\n\nimport { API, setAuthToken } from './config/api'; // Init token on axios every time the app is refreshed here ...\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nif (localStorage.token) {\n  setAuthToken(localStorage.token);\n}\n\nfunction App() {\n  _s();\n\n  const navigate = useNavigate(); // Init user context here ...\n\n  const [state, dispatch] = useContext(UserContext); // Redirect Auth here ...\n\n  useEffect(() => {\n    if (!state.isLogin) {\n      navigate('/');\n    } else {\n      if (state.user.status === \"admin\") {\n        navigate('/home');\n      } else if (state.user.status === \"customer\") {\n        navigate('/homesub');\n      }\n    }\n  }, [state]); // Create function for check user token here ...\n\n  const checkUser = async () => {\n    try {\n      const response = await API.get('/check-auth');\n\n      if (response.status === 404) {\n        return dispatch({\n          type: \"AUTH_ERROR\"\n        });\n      }\n\n      let payload = response.data.data.user;\n      payload.token = localStorage.token;\n      return dispatch({\n        type: \"USER_SUCCESS\",\n        payload\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }; // Call function check user with useEffect didMount here ...\n\n\n  useEffect(() => {\n    checkUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Landing, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/home\",\n        element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/homesub\",\n        element: /*#__PURE__*/_jsxDEV(HomeSubscribe, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/subscribe\",\n        element: /*#__PURE__*/_jsxDEV(Subscribe, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/profile\",\n        element: /*#__PURE__*/_jsxDEV(ProfilePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/bookdetail\",\n        element: /*#__PURE__*/_jsxDEV(BookDetail, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 58\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/addbook\",\n        element: /*#__PURE__*/_jsxDEV(ProfilePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/readbook\",\n        element: /*#__PURE__*/_jsxDEV(ReadPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 56\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"fh+PTpOatY/4M6o8qX/JIBdMSdA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Dumbways/stage 2/z-project/client/src/App.js"],"names":["BrowserRouter","Router","Route","Routes","Link","useNavigate","useContext","useState","useEffect","UserContext","Landing","HomePage","Subscribe","HomeSubscribe","ProfilePage","BookDetail","ReadPage","API","setAuthToken","localStorage","token","App","navigate","state","dispatch","isLogin","user","status","checkUser","response","get","type","payload","data","error","console","log"],"mappings":"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","sourcesContent":["import { BrowserRouter as Router, Route, Routes, Link, useNavigate } from \"react-router-dom\";\r\nimport { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"./contex/userContext\";\r\nimport Landing from './landing-page'\r\nimport HomePage from \"./components/home\";\r\nimport Subscribe from './components/subscribe-page'\r\nimport HomeSubscribe from \"./components/home-subscribe\";\r\nimport ProfilePage from \"./components/profile\";\r\nimport BookDetail from \"./components/bookdetail\";\r\nimport ReadPage from \"./components/readBook-Page\"\r\n\r\n// Get API config & setAuthToken here ...\r\nimport { API, setAuthToken } from './config/api'\r\n\r\n// Init token on axios every time the app is refreshed here ...\r\nif (localStorage.token) {\r\n    setAuthToken(localStorage.token)\r\n}\r\n\r\nfunction App() {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    // Init user context here ...\r\n    const [state, dispatch] = useContext(UserContext)\r\n\r\n    // Redirect Auth here ...\r\n    useEffect(() => {\r\n        if (!state.isLogin) {\r\n            navigate('/')\r\n        } else {\r\n            if (state.user.status === \"admin\") {\r\n                navigate('/home')\r\n            } else if (state.user.status === \"customer\") {\r\n                navigate('/homesub')\r\n            }\r\n        }\r\n    }, [state])\r\n\r\n    // Create function for check user token here ...\r\n    const checkUser = async () => {\r\n        try {\r\n            const response = await API.get('/check-auth')\r\n\r\n            if (response.status === 404) {\r\n                return dispatch({\r\n                    type: \"AUTH_ERROR\"\r\n                })\r\n            }\r\n\r\n            let payload = response.data.data.user\r\n            payload.token = localStorage.token\r\n\r\n            return dispatch({\r\n                type: \"USER_SUCCESS\",\r\n                payload\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    // Call function check user with useEffect didMount here ...\r\n    useEffect(() => {\r\n        checkUser()\r\n    }, [])\r\n\r\n    return (\r\n        <Router>\r\n\r\n            <Routes>\r\n                <Route exact path=\"/\" element={<Landing />} />\r\n                <Route exact path=\"/home\" element={<HomePage />} />\r\n                <Route exact path=\"/homesub\" element={<HomeSubscribe />} />\r\n                <Route exact path=\"/subscribe\" element={<Subscribe />} />\r\n                <Route exact path=\"/profile\" element={<ProfilePage />} />\r\n                <Route exact path=\"/bookdetail\" element={<BookDetail />} />\r\n                <Route exact path=\"/addbook\" element={<ProfilePage />} />\r\n                <Route exact path=\"/readbook\" element={<ReadPage />} />\r\n            </Routes>\r\n\r\n        </Router>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}